<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Multiflex: pify &lt;a href=&quot;https://travis-ci.org/sindresorhus/pify&quot; &gt;&lt;img src=&quot;https://travis-ci.org/sindresorhus/pify.svg?branch=master&quot; alt=&quot;Build Status&quot;/&gt;&lt;/a&gt;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Multiflex
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">pify <a href="https://travis-ci.org/sindresorhus/pify"><img src="https://travis-ci.org/sindresorhus/pify.svg?branch=master" alt="Build Status" style="pointer-events: none;" class="inline"/></a> </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><blockquote class="doxtable">
<p >&zwj;Promisify a callback-style function </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md2500"></a>
Install</h1>
<div class="fragment"><div class="line">$ npm install --save pify</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md2501"></a>
Usage</h1>
<div class="fragment"><div class="line">const fs = require(&#39;fs&#39;);</div>
<div class="line">const pify = require(&#39;pify&#39;);</div>
<div class="line"> </div>
<div class="line">// Promisify a single function</div>
<div class="line">pify(fs.readFile)(&#39;package.json&#39;, &#39;utf8&#39;).then(data =&gt; {</div>
<div class="line">    console.log(JSON.parse(data).name);</div>
<div class="line">    //=&gt; &#39;pify&#39;</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">// Promisify all methods in a module</div>
<div class="line">pify(fs).readFile(&#39;package.json&#39;, &#39;utf8&#39;).then(data =&gt; {</div>
<div class="line">    console.log(JSON.parse(data).name);</div>
<div class="line">    //=&gt; &#39;pify&#39;</div>
<div class="line">});</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md2502"></a>
API</h1>
<h2><a class="anchor" id="autotoc_md2503"></a>
pify(input, [options])</h2>
<p >Returns a <code>Promise</code> wrapped version of the supplied function or module.</p>
<h3><a class="anchor" id="autotoc_md2504"></a>
input</h3>
<p >Type: <code>Function</code> <code>Object</code></p>
<p >Callback-style function or module whose methods you want to promisify.</p>
<h3><a class="anchor" id="autotoc_md2505"></a>
options</h3>
<h4><a class="anchor" id="autotoc_md2506"></a>
multiArgs</h4>
<p >Type: <code>boolean</code><br  />
 Default: <code>false</code></p>
<p >By default, the promisified function will only return the second argument from the callback, which works fine for most APIs. This option can be useful for modules like <code>request</code> that return multiple arguments. Turning this on will make it return an array of all arguments from the callback, excluding the error argument, instead of just the second argument. This also applies to rejections, where it returns an array of all the callback arguments, including the error.</p>
<div class="fragment"><div class="line">const request = require(&#39;request&#39;);</div>
<div class="line">const pify = require(&#39;pify&#39;);</div>
<div class="line"> </div>
<div class="line">pify(request, {multiArgs: true})(&#39;https://sindresorhus.com&#39;).then(result =&gt; {</div>
<div class="line">    const [httpResponse, body] = result;</div>
<div class="line">});</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2507"></a>
include</h4>
<p >Type: <code>string[]</code> <code>RegExp[]</code></p>
<p >Methods in a module to promisify. Remaining methods will be left untouched.</p>
<h4><a class="anchor" id="autotoc_md2508"></a>
exclude</h4>
<p >Type: <code>string[]</code> <code>RegExp[]</code><br  />
 Default: <code>[/.+(Sync|Stream)$/]</code></p>
<p >Methods in a module <b>not</b> to promisify. Methods with names ending with &lsquo;'Sync&rsquo;` are excluded by default.</p>
<h4><a class="anchor" id="autotoc_md2509"></a>
excludeMain</h4>
<p >Type: <code>boolean</code><br  />
 Default: <code>false</code></p>
<p >If given module is a function itself, it will be promisified. Turn this option on if you want to promisify only methods of the module.</p>
<div class="fragment"><div class="line">const pify = require(&#39;pify&#39;);</div>
<div class="line"> </div>
<div class="line">function fn() {</div>
<div class="line">    return true;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">fn.method = (data, callback) =&gt; {</div>
<div class="line">    setImmediate(() =&gt; {</div>
<div class="line">        callback(null, data);</div>
<div class="line">    });</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">// Promisify methods but not `fn()`</div>
<div class="line">const promiseFn = pify(fn, {excludeMain: true});</div>
<div class="line"> </div>
<div class="line">if (promiseFn()) {</div>
<div class="line">    promiseFn.method(&#39;hi&#39;).then(data =&gt; {</div>
<div class="line">        console.log(data);</div>
<div class="line">    });</div>
<div class="line">}</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2510"></a>
errorFirst</h4>
<p >Type: <code>boolean</code><br  />
 Default: <code>true</code></p>
<p >Whether the callback has an error as the first argument. You'll want to set this to <code>false</code> if you're dealing with an API that doesn't have an error as the first argument, like <code>fs.exists()</code>, some browser APIs, Chrome Extension APIs, etc.</p>
<h4><a class="anchor" id="autotoc_md2511"></a>
promiseModule</h4>
<p >Type: <code>Function</code></p>
<p >Custom promise module to use instead of the native one.</p>
<p >Check out <a href="https://github.com/floatdrop/pinkie-promise"><code>pinkie-promise</code></a> if you need a tiny promise polyfill.</p>
<h1><a class="anchor" id="autotoc_md2512"></a>
Related</h1>
<ul>
<li><a href="https://github.com/sindresorhus/p-event">p-event</a> - Promisify an event by waiting for it to be emitted</li>
<li><a href="https://github.com/sindresorhus/p-map">p-map</a> - Map over promises concurrently</li>
<li><a href="https://github.com/sindresorhus/promise-fun">More…</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md2513"></a>
License</h1>
<p >MIT © <a href="https://sindresorhus.com">Sindre Sorhus</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
